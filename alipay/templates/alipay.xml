<?xml version="1.0" encoding="utf-8"?>

<alipay>
    <is_success>{{ context.is_success }}</is_success>
    {% if error not in context %}
    <request>
        {% for req_mandatory_field in schema.req.mandatory %}
        <param name="{{ req_mandatory_field }}">{% autoescape off %}{{ context[req_mandatory_field] }}{% endautoescape %}</param>
        {% endfor %}
        {% for req_optional_field in schema.req.optional %}
        {% if req_optional_field in context %}
        <param name="{{ req_optional_field }}">{% autoescape off %}{{ context[req_optional_field] }}{% endautoescape %}</param>
        {% endif %}
        {% endfor %}
    </request>
    <response>
        <alipay>
            {% for resp_mandatory_field in schema.resp.mandatory %}
            <{{ resp_mandatory_field }}>{% autoescape off %}{{ context[resp_mandatory_field] }}{% endautoescape %}</{{ resp_mandatory_field }}>
            {% endfor %}
            {% for resp_optional_field in schema.resp.optional %}
            {% if resp_optional_field in context %}
            <{{ resp_optional_field }}>{% autoescape off %}{{ context[resp_optional_field] }}{% endautoescape %}</{{ resp_optional_field }}>
            {% endif %}
            {% endfor %}
        </alipay>
    </response>
    <sign>{{ context.sign }}</sign>
    <sign_type>{{ context.sign_type }}</sign_type>
    {% else %}
    <error>{{ context.error }}</error>
    {% endif %}
</alipay>